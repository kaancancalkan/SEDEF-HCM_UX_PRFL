/*
 * Copyright (C) 2009-2018 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/base/Object","sap/ui/model/json/JSONModel","sap/ui/model/odata/v2/ODataModel","com/sedef/hcm/ux/myprofile/utils/ODataHelper","com/sedef/hcm/ux/myprofile/utils/reuseHandler","sap/ui/core/routing/History"],function(e,t,a,o,i,s){"use strict";var n={EMPLOYEEPROFILE:{target:{semanticObject:"ZHCMUXSEM002",action:"monitor"}},EMPLOYEELOOKUP:{target:{semanticObject:"ZHCMUXSEM004",action:"lookup"}},PAYSTUBS:{target:{semanticObject:"ZHCMUXSEM001",action:"monitor"}},LEAVEREQUEST:{target:{semanticObject:"LeaveRequest",action:"manage"}},TIMEEVENTS:{target:{semanticObject:"TimeEntry",action:"change"}},TIMESHEET:{target:{semanticObject:"TimeEntry",action:"manageTimesheet"}},MYADDRESSES:{target:{semanticObject:"Employee",action:"manageAddressData"}},MYPERSONALDATA:{target:{semanticObject:"Employee",action:"managePersonalData"}},MYBANKDETAILS:{target:{semanticObject:"Employee",action:"manageBankData"}},MYFAMILYMEMBERS:{target:{semanticObject:"Employee",action:"manageFamilyMembers"}},MYCOMMUNICATIONDATA:{target:{semanticObject:"Employee",action:"manageCommunicationData"}},MYINTERNALDATA:{target:{semanticObject:"Employee",action:"manageInternalData"}}},r={ABSENCE:"Absence",CAREERPROGRESS:"CareerProgress",COLLEAGUE:"Colleague",COMPENSATION:"Compensation",CONFIGURATION:"Configuration",EMPLOYEEDETAIL:"EmployeeDetail",EMPLOYEEPICTURE:"EmployeePicture",PAYSTUB:"Paystub",PERFORMANCE:"Performance",QUALIFICATION:"Qualification",SCALEPROFICIENCY:"ScaleProficiency",TIMEBALANCE:"TimeBalance",TIMERECORDING:"TimeRecording",TRAINING:"Training",ADDRESS:"Address",BANKDETAIL:"BankDetail",PERSONALDATA:"PersonalData",COMMUNICATION:"Communication",FAMILYMEMBERS:"FamilyMember",INTERNALDATA:"InternalData",EDUCATION:"Education",WORKEXPERIENCE:"WorkExperience",FOREIGNLANGUAGE:"ForeignLanguage",COURSE:"Course",CERTIFICATE:"Certificate",EMPLOYEESKILL:"EmployeeSkill"},l={COLLEAGUES:"toColleagues",EMPLOYEEPICTURE:"toEmployeePicture",MANAGERDETAIL:"toManagerDetail",ABSENCE:"toAbsence",TIMERECORDING:"toTimeRecording",TIMEBALANCE:"toTimeBalance",TRAININGS:"toTrainings",PERFORMANCE:"toPerformance",QUALIFICATIONS:"toQualifications",CAREERPROGRESS:"toCareerProgress",PAYSTUBS:"toPaystubs",SALARY:"toCompensation",ADDRESSES:"toAddresses",BANKDETAIL:"toBankDetails",PERSONALDATA:"toPersonalData",FAMILYMEMBERS:"toFamilyMember",COMMUNICATION:"toCommunication",INTERNALDATA:"toInternalData",EDUCATION:"toEducations",WORKEXPERIENCE:"toWorkExperiences",FOREIGNLANGUAGE:"toForeignLanguages",COURSE:"toCourses",CERTIFICATE:"toCertificates",EMPLOYEESKILL:"toEmployeeSkills"};return e.extend("nw.epm.refapps.ext.prod.manage.controller.Application",{reuseHandler:i,constructor:function(e){this._oComponent=e;this._oOnMetaData={onSuccess:[],onFailure:[]};this.oEmployeeDataMap={};this._oApplicationModel=new t({applicationController:this,schemaNamespace:null,metaDataLoadState:0,oConfigData:{},isAppBusy:true,busyIndicatorDelay:0,defaultEmployeeId:null,employeeId:null,defaultVersionId:null,isEmployeeLookupAvailable:false,isMyLeaveRequestAvailable:false,isMyTimeEventsAvailable:false,isMyTimesheetAvailable:false,isMyPaystubsAvailable:false,isMyAdressesAvailable:false,isMyBankDetailsAvailable:false,isMyPersonalDataAvailable:false,isMyFamilyMembersAvailable:false,isMyInternalDataAvailable:false,isMyCommunicationDataAvailable:false,addressInfoMetaData:[],bAuthEditAddress:false});this._oComponent.setModel(this._oApplicationModel,"appProperties");var a=this._oComponent.getModel();if(a.getServiceMetadata()){this.onMetadataLoaded()}else{a.attachMetadataLoaded(this.onMetadataLoaded,this);a.attachMetadataFailed(this.onMetadataFailed,this)}this._oDataHelper=new o(this._oComponent);this._oRouter=this._oComponent.getRouter();i.setOwnerComponent(this._oComponent);this.oCrossAppNavigator=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");this._initCrossAppNavigationSettings()},onMetadataLoaded:function(){this._oApplicationModel.setProperty("/metaDataLoadState",1);for(var e=0;e<this._oOnMetaData.onSuccess.length;e++){this._oOnMetaData.onSuccess[e]()}this._oOnMetaData=null;this._oApplicationModel.setProperty("/schemaNamespace",this._oComponent.getModel().getServiceMetadata().dataServices.schema[0].namespace)},onMetadataFailed:function(){this._oApplicationModel.setProperty("/metaDataLoadState",-1);for(var e=0;e<this._oOnMetaData.onFailure.length;e++){this._oOnMetaData.onFailure[e]()}this._oOnMetaData={onSuccess:[],onFailure:[]}},navBack:function(){var e=s.getInstance().getPreviousHash();if(e!==undefined||!this.oCrossAppNavigator.isInitialNavigation()){this.oCrossAppNavigator.historyBack(1)}else{this.navToExternal()}},navToExternal:function(e,t){var a="";if(t){a=this.oCrossAppNavigator&&this.oCrossAppNavigator.hrefForExternal({target:{semanticObject:e.semanticObject,action:e.action},params:{EmployeeNumber:[t]}})}else if(e){a=this.oCrossAppNavigator&&this.oCrossAppNavigator.hrefForExternal({target:{semanticObject:e.semanticObject,action:e.action}})}else{a=this.oCrossAppNavigator&&this.oCrossAppNavigator.hrefForExternal({target:{shellHash:"#"}})}this.oCrossAppNavigator.toExternal({target:{shellHash:a}})},getODataHelper:function(){return this._oDataHelper},getComponent:function(){return this._oComponent},getAppNavProperties:function(){return l},getAppEntities:function(){return r},getCrossAppNavIntends:function(){return n},navPropertyExists:function(e,t){var a=this._oApplicationModel.getProperty("/schemaNamespace")+"."+e,o=this._oDataHelper.getMetaModel().getODataEntityType(a);if(o.navigationProperty){return o.navigationProperty.some(function(e){return e.name===t})}return false},getEmployeeDataModelForEmployeeId:function(e){if(!this.oEmployeeDataMap[e]){this.setEmployeeDataModelForEmployeeId(e,this._getNewEmployeeDataJSONModel())}return this.oEmployeeDataMap[e]},setEmployeeDataModelForEmployeeId:function(e,t){this.oEmployeeDataMap[e]=t},loadEmployeeDataModelForEmployeeId:function(e){this._oComponent.setModel(this.getEmployeeDataModelForEmployeeId(e),"appEmployeeData")},whenMetadataLoaded:function(e,t){var a=this._oApplicationModel.getProperty("/metaDataLoadState");if(a===1){if(e){e()}}else{if(e){this._oOnMetaData.onSuccess.push(e)}if(t){this._oOnMetaData.onFailure.push(t)}if(a===-1){this._oApplicationModel.setProperty("/metaDataLoadState",0);this._oComponent.getModel().refreshMetadata()}}},_initCrossAppNavigationSettings:function(){this._checkNavIntendSupported([n.LEAVEREQUEST],this._oApplicationModel,"isMyLeaveRequestAvailable");this._checkNavIntendSupported([n.EMPLOYEELOOKUP],this._oApplicationModel,"isEmployeeLookupAvailable");this._checkNavIntendSupported([n.TIMEEVENTS],this._oApplicationModel,"isMyTimeEventsAvailable");this._checkNavIntendSupported([n.PAYSTUBS],this._oApplicationModel,"isMyPaystubsAvailable");this._checkNavIntendSupported([n.TIMESHEET],this._oApplicationModel,"isMyTimesheetAvailable");this._checkNavIntendSupported([n.MYADDRESSES],this._oApplicationModel,"isMyAddressesAvailable");this._checkNavIntendSupported([n.MYBANKDETAILS],this._oApplicationModel,"isMyBankDetailsAvailable");this._checkNavIntendSupported([n.MYFAMILYMEMBERS],this._oApplicationModel,"isMyFamilyMembersAvailable");this._checkNavIntendSupported([n.MYPERSONALDATA],this._oApplicationModel,"isMyPersonalDataAvailable");this._checkNavIntendSupported([n.MYINTERNALDATA],this._oApplicationModel,"isMyInternalDataAvailable");this._checkNavIntendSupported([n.MYCOMMUNICATIONDATA],this._oApplicationModel,"isMyCommunicationDataAvailable")},_checkNavIntendSupported:function(e,t,a){t.setProperty("/"+a,false)},_getNewEmployeeDataJSONModel:function(){return new t({bCareerProgressExist:true,bEducationExist:true,bPerformanceExist:true,bMultipleSkillsExist:true,bQualificationsExist:true,bSalaryExists:true,bPaystubsExist:true,bTrainingsExist:true,bAbsenceExists:true,bTimeRecordingExists:true,bTimeBalanceExists:true,bPersInfoAddressExists:true,bPersInfoBankDataExists:true,bPersInfoFamilyMembersExists:true,bPersInfoPersonalDataExists:true,bPersInfoInternalDataExists:true,bPersInfoCommunicationDataExists:true,bWorkExperienceExist:true,bForeignLanguageExist:true,bCourseExist:true,bCertificateExist:true})}})});
//# sourceMappingURL=Application.js.map