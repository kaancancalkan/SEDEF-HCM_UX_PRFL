/*
 * Copyright (C) 2009-2018 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["com/sedef/hcm/ux/myprofile/controller/BaseController","com/sedef/hcm/ux/myprofile/utils/formatter","com/sedef/hcm/ux/myprofile/utils/reuseHandler","com/sedef/hcm/ux/myprofile/controller/ErrorHandler","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,o,i,r,n,s){"use strict";return e.extend("com.sedef.hcm.ux.myprofile.blocks.TimeRecordingBlockController",{formatter:t,onInit:function(){var e=this.getView(),t=o.getOwnerComponent(),i=t.getModel("appProperties"),n=i.getProperty("/employeeId"),s=i.getProperty("/applicationController"),l=s.getAppNavProperties(),p=s.getAppEntities(),d=new r({busy:false,bTimeRecordingExists:true});this.setModel(d,"TimeRecordingView");this.oApplicationController=s;if(s.navPropertyExists(p.EMPLOYEEDETAIL,l.TIMERECORDING)){e.bindElement(l.TIMERECORDING)}else{s.whenMetadataLoaded(function(){d.setProperty("/busy",true);this._bindView(n)}.bind(this))}},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("com.sedef.hcm.ux.myprofile","employeeIdChanged",this.onEmployeeIdChange,this)},onEmployeeIdChange:function(e,t,o){this._bindView(o.EmployeeId)},onNavToMyTimesheet:function(){this.oApplicationController.navToExternal(this.oApplicationController.getCrossAppNavIntends().TIMESHEET.target)},_bindView:function(e){var t=this.oApplicationController.getEmployeeDataModelForEmployeeId(e),o=this.getView(),i=this.getModel("TimeRecordingView"),l=[new n("EmployeeNumber",s.EQ,e)],p=function(e){if(!e.results||e.results&&e.results.length===0){t.setProperty("/bTimeRecordingExists",false)}else{t.setProperty("/bTimeRecordingExists",true);o.setModel(new r({TimeRecording:e.results[0]}));o.bindElement("/TimeRecording")}i.setProperty("/busy",false)};this.oApplicationController.getODataHelper().read("/TimeRecordingSet",p,l)}})});
//# sourceMappingURL=TimeRecordingBlockController.controller.js.map